$(document).ready(function(){function e(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}}var t;jQuery,t="smartresize",jQuery.fn[t]=function(e){return e?this.bind("resize",(n=e,function(){var e=this,t=arguments;r?clearTimeout(r):o&&n.apply(e,t),r=setTimeout(function(){o||n.apply(e,t),r=null},i||100)})):this.trigger(t);var n,i,o,r},$.fn.swipeEvents=function(){return this.each(function(){var e,t,n=$(this);function i(r){var a=r.originalEvent.touches;if(a&&a.length){var l=e-a[0].pageX,s=t-a[0].pageY;l>=50&&n.trigger("swipeLeft"),l<=-50&&n.trigger("swipeRight"),s>=50&&n.trigger("swipeUp"),s<=-50&&n.trigger("swipeDown"),(Math.abs(l)>=50||Math.abs(s)>=50)&&(n.unbind("touchmove",i),n.unbind("touchend",o))}}function o(e){n.unbind("touchmove",i)}n.bind("touchstart",function(r){var a=r.originalEvent.touches;a&&a.length&&(e=a[0].pageX,t=a[0].pageY,n.bind("touchmove",i),n.bind("touchend",o))})})};var n=!1,i=!1,o=!1,r=!1;$.fn.betterScroll=function(){var t,a,l,s,c=$(this),d=0,u={sectionSelector:".page-section",sectionChildSelector:".page-frame",sectionWrapper:".page",scrollDownSelector:".js-slide-down",scrollUpSelector:".js-slide-up",scrollToFirst:".js-slide-first",scrollToFour:".js-slide-four",responsivePoint:300,animationDuration:1250};return l=$(u.sectionSelector),s=0,$("html").addClass("campaign-scroll"),l.eq(0).addClass("active"),l.each(function(){var n=$(this);t=e().height,n.attr("style","height: auto !important"),n.find(u.sectionChildSelector)&&(a=n.find(u.sectionChildSelector).innerHeight())>t&&(t=a),n.attr("style","height: "+t+"px !important"),n.attr("data-section-index",s),s++}),$(window).smartresize(function(){var t,n,i,o,r;i=$(u.sectionSelector),o=$(u.sectionSelector+".active"),r=o.data("section-index"),i.each(function(){var i=$(this);t=e().height,i.attr("style","height: auto !important"),i.find(u.sectionChildSelector)&&(n=i.find(u.sectionChildSelector).innerHeight())>t&&(t=n),i.attr("style","height: "+t+"px !important")}),e().width>u.responsivePoint?(c.bindMouseWheel(),c.bindSwipe(),c.betterScrollTransform(r),$("html").removeClass("scroll-on").addClass("scroll-off")):(c.unbindMouseWheel(),c.unbindSwipe(),c.betterScrollTransform(0,!0),o.removeClass("active"),i.eq(0).addClass("active"),$("html").removeClass("scroll-off").addClass("scroll-on"))}),$.fn.betterScrollTransform=function(t,n){var i,o=$(u.sectionSelector+'[data-section-index="'+t+'"]').offset().top,r=-e().height*t;navigator.userAgent.match(/iPhone|iPad|iPod/i)&&(r=-Math.abs(o)*t),e().width>u.responsivePoint||n?void 0!==(i=(document.body||document.documentElement).style).transition||void 0!==i.WebkitTransition||void 0!==i.MozTransition||void 0!==i.MsTransition||void 0!==i.OTransition?$(u.sectionWrapper).css({"-webkit-transform":"translate3d(0, "+r+"px, 0)","-webkit-transition":"all "+u.animationDuration+"ms ease","-moz-transform":"translate3d(0, "+r+"px, 0)","-moz-transition":"all "+u.animationDuration+"ms ease","-ms-transform":"translate3d(0, "+r+"px, 0)","-ms-transition":"all "+u.animationDuration+"ms ease",transform:"translate3d(0, "+r+"px, 0)",transition:"all "+u.animationDuration+"ms ease"}):$(u.sectionWrapper).animate({top:r},u.animationDuration):$("html,body").animate({scrollTop:$(u.sectionSelector+'[data-section-index="'+t+'"]').offset().top},u.animationDuration)},$.fn.betterScrollDown=function(){var e=$(this),t=$(u.sectionSelector+".active"),n=t.data("section-index"),i=$(u.sectionSelector+'[data-section-index="'+(n+1)+'"]');i.length>0&&(t.removeClass("active"),i.addClass("active"),e.betterScrollTransform(n+1))},$.fn.betterScrollUp=function(){var e=$(this),t=$(u.sectionSelector+".active"),n=t.data("section-index"),i=$(u.sectionSelector+'[data-section-index="'+(n-1)+'"]');i.length>0&&(t.removeClass("active"),i.addClass("active"),e.betterScrollTransform(n-1))},$(u.scrollDownSelector).on("click",function(e){e.preventDefault(),c.betterScrollDown()}),$(u.scrollUpSelector).on("click",function(e){e.preventDefault(),c.betterScrollUp()}),$(u.scrollToFirst).on("click",function(e){var t=$(u.sectionSelector+".active"),n=$(u.sectionSelector+'[data-section-index="0"]');e.preventDefault(),t.removeClass("active"),n.addClass("active"),c.betterScrollTransform(0)}),$(u.scrollToFour).on("click",function(e){var t=$(u.sectionSelector+".active"),n=$(u.sectionSelector+'[data-section-index="4"]');e.preventDefault(),t.removeClass("active"),n.addClass("active"),c.betterScrollTransform(4)}),$.fn.bindMouseWheel=function(){0==n&&($(document).bind("mousewheel DOMMouseScroll",function(e){!function(e,t){var n=t,i=(new Date).getTime();i-d<1e3?e.preventDefault():(n>0?c.betterScrollUp():c.betterScrollDown(),d=i)}(e,function(e){return e.wheelDelta?e.wheelDelta:e.originalEvent.detail?-40*e.originalEvent.detail:e.originalEvent&&e.originalEvent.wheelDelta?e.originalEvent.wheelDelta:void 0}(e)),e.preventDefault()}),n=!0)},$.fn.unbindMouseWheel=function(){1==n&&($(document).unbind("mousewheel DOMMouseScroll"),n=!1)},0==o&&(c.swipeEvents(),o=!0),$.fn.bindSwipe=function(){0==r&&($(document).bind("swipeDown",function(){var e=(new Date).getTime();e-d<1e3?event.preventDefault():(c.betterScrollUp(),d=e)}).bind("swipeUp",function(){var e=(new Date).getTime();e-d<1e3?event.preventDefault():(c.betterScrollDown(),d=e)}),r=!0)},$.fn.unbindSwipe=function(){1==r&&($(document).unbind("swipeDown swipeUp"),r=!1)},e().width>u.responsivePoint?(c.bindMouseWheel(),c.bindSwipe(),$("html").addClass("scroll-off")):$("html").addClass("scroll-on"),0==i&&($(document).keydown(function(e){var t=e.target.tagName.toLowerCase();switch(e.which){case 9:e.preventDefault();break;case 38:"input"!=t&&"textarea"!=t&&c.betterScrollUp();break;case 40:"input"!=t&&"textarea"!=t&&c.betterScrollDown();break;default:return}e.preventDefault()}),i=!0),!1},$("#page").betterScroll()});
